/**
 * Global Width Fix for Dark Theme Issue
 * =====================================
 * This file ensures proper width constraints regardless of theme classes
 * Fixes the issue where dark theme was causing 1820px width
 */

/* ============================================
   CRITICAL: Force proper width on HTML element
   ============================================ */

/* Reset any width issues on html element regardless of class combinations */
html,
html[class*="dark"],
html[class*="theme"],
html.dark,
html.theme-dark,
html.dark-theme,
html.dark-theme-dark,
html[data-theme="dark"] {
  width: 100% !important;
  max-width: 100vw !important;
  min-width: 100% !important;
  overflow-x: hidden !important;
  margin: 0 !important;
  padding: 0 !important;
  box-sizing: border-box !important;
}

/* Ensure body also follows constraints */
body {
  width: 100% !important;
  max-width: 100vw !important;
  overflow-x: hidden !important;
  margin: 0 !important;
  padding: 0 !important;
  box-sizing: border-box !important;
}

/* Root app container - CRITICAL FIX for 1820px issue */
#root,
div#root,
body > #root,
body > div#root,
[id="root"] {
  width: 100% !important;
  max-width: 100% !important; /* Changed from 100vw to 100% */
  min-width: 0 !important;
  overflow-x: hidden !important;
  position: relative !important;
  margin: 0 !important;
  padding: 0 !important;
  box-sizing: border-box !important;
}

/* Force override any inline styles on root */
#root[style*="width"] {
  width: 100% !important;
  max-width: 100% !important;
}

/* ============================================
   CONTENT WIDTH BEST PRACTICES (<1400px)
   ============================================ */

/* CRITICAL: Only constrain dashboard and main app pages, not auth screens */
/* Let auth screens use their own Tailwind sizing (max-w-md, etc) */

/* Target only specific dashboard and content pages that need width constraints */
.student-dashboard,
.dashboard-router,
.dashboard-page,
.DashboardPage,
[class*="Dashboard"]:not([class*="login"]):not([class*="auth"]),
[class*="Container"][class*="ai"],
[class*="Container"][class*="AI"] {
  width: 100% !important;
  max-width: 1400px !important;
  margin: 0 auto !important;
  box-sizing: border-box !important;
}

/* Remove global div constraint - too broad, affects login forms and other elements that need specific widths */
/* Instead, target specific containers that need width constraints */

/* Don't override auth forms - they use Tailwind classes like max-w-md */
/* Only target specific problematic containers that need constraints */

/* Headers at any level */
header,
.header,
[class*="header"],
[class*="Header"],
div[class*="header"],
div[class*="Header"] {
  width: 100% !important;
  max-width: 1400px !important;
  margin: 0 auto !important;
  box-sizing: border-box !important;
}

/* ProgressHeader specific constraints */
.progressHeader,
.progress-header,
.ProgressHeader,
[class*="progressHeader"],
[class*="progress-header"],
[class*="ProgressHeader"],
div[class*="progressHeader"],
div[class*="ProgressHeader"] {
  width: 100% !important;
  max-width: 1400px !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  margin: 0 !important;
  box-sizing: border-box !important;
  padding-left: 20px !important;
  padding-right: 20px !important;
}

/* Ensure headerContent inside ProgressHeader is also constrained */
.progressHeader .headerContent,
[class*="progressHeader"] [class*="headerContent"] {
  width: 100% !important;
  max-width: 1360px !important; /* Slightly less to account for padding */
  margin: 0 auto !important;
  padding: 0 20px !important;
  box-sizing: border-box !important;
}

/* Main content containers - enforce max width */
.student-dashboard-wrapper,
.dashboard-wrapper,
.main-wrapper,
[class*="wrapper"],
[class*="dashboard"],
[class*="container"] {
  width: 100%;
  max-width: min(1400px, 100vw) !important;
  margin: 0 auto !important;
  position: relative;
  box-sizing: border-box;
}

/* Content areas - optimal reading width */
.container-content,
.content-wrapper,
.main-content,
[class*="container"][class*="content"] {
  width: 100%;
  max-width: min(1200px, 100vw) !important;
  margin: 0 auto;
  padding: 0 20px;
  box-sizing: border-box;
}

/* AI Containers - ensure they don't exceed viewport */
.ai-learn-container,
.ai-experience-container,
.ai-discover-container,
.multi-subject-container,
[class*="ai-"][class*="container"] {
  width: 100% !important;
  max-width: 100vw !important;
  overflow-x: hidden !important;
}

/* Inner content of AI containers */
.ai-learn-container > *,
.ai-experience-container > *,
.ai-discover-container > *,
.multi-subject-container > * {
  max-width: min(1200px, calc(100vw - 40px)) !important;
  margin: 0 auto;
}

/* ============================================
   MODAL WIDTH CONSTRAINTS
   ============================================ */

/* Modal overlays can be full viewport */
.modal-overlay {
  width: 100vw !important;
  max-width: 100vw !important;
}

/* Modal containers must be constrained */
.dashboard-modal,
[class*="modal"]:not(.modal-overlay) {
  width: 100% !important;
  max-width: 1400px !important;
  margin: 0 auto !important;
}

/* Modal headers - CRITICAL FIX */
.modal-header,
.modal-headers,
div.modal-headers,
[class*="modal-header"],
[class*="modal-headers"] {
  width: 100% !important;
  max-width: 1400px !important;
  margin: 0 auto !important;
  box-sizing: border-box !important;
}

/* Modal content areas */
.modal-content,
.dashboard-modal-content,
.modal-body,
[class*="modal-content"],
[class*="modal-body"] {
  width: 100% !important;
  max-width: min(1200px, calc(100vw - 40px)) !important;
  margin: 0 auto !important;
  box-sizing: border-box !important;
}

/* ============================================
   RESPONSIVE ADJUSTMENTS
   ============================================ */

/* Tablet and below */
@media (max-width: 1024px) {
  .container-content,
  .content-wrapper,
  .main-content {
    max-width: 100% !important;
    padding: 0 16px;
  }
}

/* Mobile */
@media (max-width: 768px) {
  .container-content,
  .content-wrapper,
  .main-content {
    padding: 0 12px;
  }
}

/* ============================================
   UTILITY OVERRIDES
   ============================================ */

/* Force full width where needed */
.w-full-important {
  width: 100% !important;
  max-width: 100% !important;
}

/* Force constrained width */
.w-constrained-important {
  width: 100% !important;
  max-width: 1400px !important;
  margin: 0 auto !important;
}

/* Force optimal content width */
.w-content-important {
  width: 100% !important;
  max-width: 1200px !important;
  margin: 0 auto !important;
}

/* ============================================
   DEBUG HELPERS (Remove in production)
   ============================================ */

/* Visual indicator for debugging width issues */
.debug-width-issue {
  outline: 3px solid red !important;
  outline-offset: -3px !important;
}

/* Show current viewport width */
.debug-viewport::after {
  content: "Viewport: " var(--viewport-width, "unknown");
  position: fixed;
  bottom: 10px;
  right: 10px;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 5px 10px;
  font-size: 12px;
  z-index: 99999;
  border-radius: 4px;
}